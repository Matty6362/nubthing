<!DOCTYPE html>
<html>
  <head>
    <title>Nubthing</title>
    <style>
      body {
        background-color: #ddd;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 50px;
      }
      h1 {
        color: royalblue;
      }
      input {
        margin: 10px;
        padding: 10px;
        font-size: 16px;
      }
      button {
        padding: 10px 20px;
        font-size: 16px;
      }
      .version {
        margin-top: 20px;
        font-size: 12px;
        color: black;
      }
    </style>
  </head>
  <body>
    <h1>Nubthing</h1>
    <h2>Enter the contest!</h2>
    <form id="entryForm">
      <div>
        <input type="text" id="firstName" placeholder="First Name" required />
      </div>
      <div>
        <input type="email" id="email" placeholder="Email" required />
      </div>
      <div>
        <button type="submit">Submit</button>
      </div>
    </form>
    <div class="version">v1.8.2</div>
    <script>
      document.getElementById("entryForm").addEventListener("submit", async function (e) {
        e.preventDefault();
        const firstName = document.getElementById("firstName").value;
        const email = document.getElementById("email").value;

        const response = await fetch("/api/send", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ firstName, email }),
        });

        const result = await response.json();
        if (response.ok) {
          document.body.innerHTML = `<h1>Nubthing</h1><p>A confirmation email has been sent to ${email}</p>`;
        } else {
          alert("There was an error: " + result.message);
        }
      });
    </script>
  </body>
</html>